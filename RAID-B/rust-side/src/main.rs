use base64::{decode, encode};
use evm_rs_emulator::Runner;
use std::env;
use std::iter::repeat;

use crypto::rc4::Rc4;
use crypto::symmetriccipher::SynchronousStreamCipher;

use generic_array::typenum::U16;
use rand::rngs::OsRng;
use rand::RngCore; // Provides the `fill_bytes` and `next_u32` methods.

fn decode_base64(input: &str) -> Option<Vec<u8>> {
    match decode(input) {
        Ok(decoded) => Some(decoded),
        Err(_) => None,
    }
}

fn encode_to_base64(input: Vec<u8>) -> String {
    encode(input)
}

fn main() {
    let mut rng = OsRng; // Cryptographically secure RNG.
    let random_byte: u8 = rng.next_u32() as u8; // Generate a random byte.

    let caller = [
        0x13, 0x37, 0x13, 0x37, 0x13, 0x37, 0x13, 0x37, 0x13, 0x37, 0x13, 0x37, 0x13, 0x37, 0x13,
        0x37, 0x13, 0x37, 0x13, 0x37,
    ];

    let address: Option<[u8; 20]> = None;

    let origin: Option<[u8; 20]> = Some({
        let mut arr = [0u8; 20];
        arr[19] = random_byte;
        arr
    });

    let value: Option<[u8; 32]> = Some({
        let mut arr = [0u8; 32];
        arr[31] = 0;
        arr
    });

    let args: Vec<String> = env::args().collect();

    if args.len() != 2 {
        eprintln!("Usage: {} <base64_string>", args[0]);
        return;
    }

    let input = &args[1];
    let decoded: Vec<u8> = decode_base64(input).unwrap();

    // let data: Option<Vec<u8>> = vec![83, 67, 65, 78, 123, 49, 97, 101, 48, 48, 50, 99, 54, 98, 57, 98, 52, 48, 98, 101, 97, 54, 53, 102, 50, 101, 54, 56, 100, 52, 99, 99, 98, 97, 98, 98, 53, 102, 56, 53, 101, 56, 53, 98, 57, 56, 51, 52, 52, 56, 49, 49, 53, 100, 101, 53, 53, 57, 51, 100, 55, 48, 50, 50, 101, 56, 50, 53, 57, 125, 0, 0, 0, 0].into();
    let key = vec![
        0x60, 0x80, 0xff, 0xf3, 0x50, 0x41, 0x40, 0x60, 0x80, 0x63, 0x41, 0x42, 0x43, 0x62, 0x80,
        0x00,
    ];
    let rkey = key.as_slice();

    let mut rc4 = Rc4::new(key.as_slice());
    let mut output = vec![0u8; decoded.len()];
    let _ = rc4.process(&(decoded.as_slice()), &mut output);

    let data: Option<Vec<u8>> = Some(output);

    let bytecode: Vec<u8> = vec![
        96, 128, 96, 64, 82, 52, 128, 21, 97, 0, 16, 87, 96, 0, 128, 253, 91, 80, 96, 4, 54, 16,
        97, 0, 180, 87, 96, 0, 53, 96, 224, 28, 128, 99, 145, 106, 23, 198, 17, 97, 0, 113, 87,
        128, 99, 145, 106, 23, 198, 20, 97, 1, 175, 87, 128, 99, 176, 70, 79, 220, 20, 97, 1, 196,
        87, 128, 99, 181, 80, 138, 169, 20, 97, 1, 204, 87, 128, 99, 186, 65, 79, 166, 20, 97, 1,
        212, 87, 128, 99, 226, 12, 159, 113, 20, 97, 1, 236, 87, 128, 99, 250, 118, 38, 212, 20,
        97, 1, 244, 87, 97, 0, 180, 86, 91, 128, 99, 30, 215, 131, 28, 20, 97, 1, 66, 87, 128, 99,
        42, 222, 56, 128, 20, 97, 1, 96, 87, 128, 99, 62, 94, 60, 35, 20, 97, 1, 117, 87, 128, 99,
        63, 114, 134, 244, 20, 97, 1, 125, 87, 128, 99, 102, 217, 169, 160, 20, 97, 1, 133, 87,
        128, 99, 133, 34, 108, 129, 20, 97, 1, 154, 87, 91, 96, 0, 97, 1, 17, 96, 0, 54, 128, 128,
        96, 31, 1, 96, 32, 128, 145, 4, 2, 96, 32, 1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128,
        147, 146, 145, 144, 129, 129, 82, 96, 32, 1, 131, 131, 128, 130, 132, 55, 96, 0, 146, 1,
        145, 144, 145, 82, 80, 120, 127, 10, 156, 9, 79, 194, 9, 221, 191, 220, 63, 61, 108, 110,
        84, 225, 142, 13, 61, 128, 120, 107, 26, 241, 209, 146, 80, 97, 2, 1, 145, 80, 80, 86, 91,
        144, 80, 96, 0, 129, 96, 64, 81, 96, 32, 1, 97, 1, 38, 145, 144, 97, 13, 23, 86, 91, 96,
        64, 128, 81, 96, 31, 25, 129, 132, 3, 1, 129, 82, 145, 144, 82, 128, 81, 144, 145, 80, 128,
        96, 32, 131, 1, 243, 91, 97, 1, 74, 97, 3, 207, 86, 91, 96, 64, 81, 97, 1, 87, 145, 144,
        97, 13, 77, 86, 91, 96, 64, 81, 128, 145, 3, 144, 243, 91, 97, 1, 104, 97, 4, 49, 86, 91,
        96, 64, 81, 97, 1, 87, 145, 144, 97, 13, 223, 86, 91, 97, 1, 74, 97, 5, 115, 86, 91, 97, 1,
        74, 97, 5, 211, 86, 91, 97, 1, 141, 97, 6, 51, 86, 91, 96, 64, 81, 97, 1, 87, 145, 144, 97,
        14, 241, 86, 91, 97, 1, 162, 97, 7, 160, 86, 91, 96, 64, 81, 97, 1, 87, 145, 144, 97, 15,
        113, 86, 91, 97, 1, 183, 97, 8, 112, 86, 91, 96, 64, 81, 97, 1, 87, 145, 144, 97, 15, 202,
        86, 91, 97, 1, 183, 97, 9, 86, 86, 91, 97, 1, 162, 97, 10, 60, 86, 91, 97, 1, 220, 97, 11,
        12, 86, 91, 96, 64, 81, 144, 21, 21, 129, 82, 96, 32, 1, 97, 1, 87, 86, 91, 97, 1, 74, 97,
        11, 176, 86, 91, 96, 31, 84, 97, 1, 220, 144, 96, 255, 22, 129, 86, 91, 96, 96, 96, 0, 96,
        2, 132, 81, 97, 2, 19, 145, 144, 97, 16, 111, 86, 91, 97, 2, 30, 144, 96, 1, 97, 16, 131,
        86, 91, 103, 255, 255, 255, 255, 255, 255, 255, 255, 129, 17, 21, 97, 2, 54, 87, 97, 2, 54,
        97, 16, 150, 86, 91, 96, 64, 81, 144, 128, 130, 82, 128, 96, 32, 2, 96, 32, 1, 130, 1, 96,
        64, 82, 128, 21, 97, 2, 95, 87, 129, 96, 32, 1, 96, 32, 130, 2, 128, 54, 131, 55, 1, 144,
        80, 91, 80, 144, 80, 98, 1, 0, 1, 131, 96, 0, 128, 91, 135, 81, 129, 16, 21, 97, 3, 193,
        87, 96, 0, 98, 15, 66, 64, 131, 66, 96, 64, 81, 96, 32, 1, 97, 2, 142, 145, 129, 82, 96,
        32, 1, 144, 86, 91, 96, 64, 81, 96, 32, 129, 131, 3, 3, 129, 82, 144, 96, 64, 82, 128, 81,
        144, 96, 32, 1, 32, 96, 0, 28, 97, 2, 177, 145, 144, 97, 16, 131, 86, 91, 97, 2, 187, 145,
        144, 97, 16, 172, 86, 91, 144, 80, 96, 0, 91, 129, 129, 16, 21, 97, 2, 221, 87, 97, 2, 211,
        96, 1, 133, 97, 16, 131, 86, 91, 147, 80, 96, 1, 1, 97, 2, 192, 86, 91, 80, 96, 0, 137, 81,
        131, 16, 21, 97, 3, 6, 87, 137, 131, 129, 81, 129, 16, 97, 2, 251, 87, 97, 2, 251, 97, 16,
        192, 86, 91, 1, 96, 32, 1, 81, 96, 248, 28, 144, 80, 91, 137, 81, 97, 3, 19, 132, 96, 1,
        97, 16, 131, 86, 91, 16, 21, 97, 3, 81, 87, 96, 8, 138, 97, 3, 39, 133, 96, 1, 97, 16, 131,
        86, 91, 129, 81, 129, 16, 97, 3, 55, 87, 97, 3, 55, 97, 16, 192, 86, 91, 1, 96, 32, 1, 81,
        97, 3, 78, 145, 96, 248, 145, 144, 145, 28, 144, 27, 130, 97, 16, 131, 86, 91, 144, 80, 91,
        96, 16, 97, 3, 96, 133, 96, 255, 50, 22, 97, 16, 131, 86, 91, 96, 255, 22, 144, 27, 129,
        97, 3, 112, 145, 144, 97, 16, 131, 86, 91, 144, 80, 96, 0, 97, 3, 127, 130, 136, 136, 97,
        12, 16, 86, 91, 144, 80, 128, 136, 97, 3, 142, 96, 2, 135, 97, 16, 111, 86, 91, 129, 81,
        129, 16, 97, 3, 158, 87, 97, 3, 158, 97, 16, 192, 86, 91, 96, 32, 2, 96, 32, 1, 1, 129,
        129, 82, 80, 80, 80, 80, 80, 96, 2, 129, 97, 3, 186, 145, 144, 97, 16, 131, 86, 91, 144,
        80, 97, 2, 107, 86, 91, 80, 146, 147, 80, 80, 80, 80, 91, 146, 145, 80, 80, 86, 91, 96, 96,
        96, 22, 128, 84, 128, 96, 32, 2, 96, 32, 1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128, 146,
        145, 144, 129, 129, 82, 96, 32, 1, 130, 128, 84, 128, 21, 97, 4, 39, 87, 96, 32, 2, 130, 1,
        145, 144, 96, 0, 82, 96, 32, 96, 0, 32, 144, 91, 129, 84, 96, 1, 96, 1, 96, 160, 27, 3, 22,
        129, 82, 96, 1, 144, 145, 1, 144, 96, 32, 1, 128, 131, 17, 97, 4, 9, 87, 91, 80, 80, 80,
        80, 80, 144, 80, 144, 86, 91, 96, 96, 96, 30, 128, 84, 128, 96, 32, 2, 96, 32, 1, 96, 64,
        81, 144, 129, 1, 96, 64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1, 96, 0, 144, 91,
        130, 130, 16, 21, 97, 5, 106, 87, 96, 0, 132, 129, 82, 96, 32, 128, 130, 32, 96, 64, 128,
        81, 128, 130, 1, 130, 82, 96, 2, 135, 2, 144, 146, 1, 128, 84, 96, 1, 96, 1, 96, 160, 27,
        3, 22, 131, 82, 96, 1, 129, 1, 128, 84, 131, 81, 129, 135, 2, 129, 1, 135, 1, 144, 148, 82,
        128, 132, 82, 147, 149, 145, 148, 134, 129, 1, 148, 145, 146, 144, 132, 1, 91, 130, 130,
        16, 21, 97, 5, 83, 87, 131, 130, 144, 96, 0, 82, 96, 32, 96, 0, 32, 1, 128, 84, 97, 4, 198,
        144, 97, 16, 214, 86, 91, 128, 96, 31, 1, 96, 32, 128, 145, 4, 2, 96, 32, 1, 96, 64, 81,
        144, 129, 1, 96, 64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1, 130, 128, 84, 97, 4,
        242, 144, 97, 16, 214, 86, 91, 128, 21, 97, 5, 63, 87, 128, 96, 31, 16, 97, 5, 20, 87, 97,
        1, 0, 128, 131, 84, 4, 2, 131, 82, 145, 96, 32, 1, 145, 97, 5, 63, 86, 91, 130, 1, 145,
        144, 96, 0, 82, 96, 32, 96, 0, 32, 144, 91, 129, 84, 129, 82, 144, 96, 1, 1, 144, 96, 32,
        1, 128, 131, 17, 97, 5, 34, 87, 130, 144, 3, 96, 31, 22, 130, 1, 145, 91, 80, 80, 80, 80,
        80, 129, 82, 96, 32, 1, 144, 96, 1, 1, 144, 97, 4, 167, 86, 91, 80, 80, 80, 80, 129, 82,
        80, 80, 129, 82, 96, 32, 1, 144, 96, 1, 1, 144, 97, 4, 85, 86, 91, 80, 80, 80, 80, 144, 80,
        144, 86, 91, 96, 96, 96, 24, 128, 84, 128, 96, 32, 2, 96, 32, 1, 96, 64, 81, 144, 129, 1,
        96, 64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1, 130, 128, 84, 128, 21, 97, 4, 39,
        87, 96, 32, 2, 130, 1, 145, 144, 96, 0, 82, 96, 32, 96, 0, 32, 144, 129, 84, 96, 1, 96, 1,
        96, 160, 27, 3, 22, 129, 82, 96, 1, 144, 145, 1, 144, 96, 32, 1, 128, 131, 17, 97, 4, 9,
        87, 80, 80, 80, 80, 80, 144, 80, 144, 86, 91, 96, 96, 96, 23, 128, 84, 128, 96, 32, 2, 96,
        32, 1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1,
        130, 128, 84, 128, 21, 97, 4, 39, 87, 96, 32, 2, 130, 1, 145, 144, 96, 0, 82, 96, 32, 96,
        0, 32, 144, 129, 84, 96, 1, 96, 1, 96, 160, 27, 3, 22, 129, 82, 96, 1, 144, 145, 1, 144,
        96, 32, 1, 128, 131, 17, 97, 4, 9, 87, 80, 80, 80, 80, 80, 144, 80, 144, 86, 91, 96, 96,
        96, 27, 128, 84, 128, 96, 32, 2, 96, 32, 1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128, 146,
        145, 144, 129, 129, 82, 96, 32, 1, 96, 0, 144, 91, 130, 130, 16, 21, 97, 5, 106, 87, 131,
        130, 144, 96, 0, 82, 96, 32, 96, 0, 32, 144, 96, 2, 2, 1, 96, 64, 81, 128, 96, 64, 1, 96,
        64, 82, 144, 129, 96, 0, 130, 1, 128, 84, 97, 6, 138, 144, 97, 16, 214, 86, 91, 128, 96,
        31, 1, 96, 32, 128, 145, 4, 2, 96, 32, 1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128, 146,
        145, 144, 129, 129, 82, 96, 32, 1, 130, 128, 84, 97, 6, 182, 144, 97, 16, 214, 86, 91, 128,
        21, 97, 7, 3, 87, 128, 96, 31, 16, 97, 6, 216, 87, 97, 1, 0, 128, 131, 84, 4, 2, 131, 82,
        145, 96, 32, 1, 145, 97, 7, 3, 86, 91, 130, 1, 145, 144, 96, 0, 82, 96, 32, 96, 0, 32, 144,
        91, 129, 84, 129, 82, 144, 96, 1, 1, 144, 96, 32, 1, 128, 131, 17, 97, 6, 230, 87, 130,
        144, 3, 96, 31, 22, 130, 1, 145, 91, 80, 80, 80, 80, 80, 129, 82, 96, 32, 1, 96, 1, 130, 1,
        128, 84, 128, 96, 32, 2, 96, 32, 1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128, 146, 145,
        144, 129, 129, 82, 96, 32, 1, 130, 128, 84, 128, 21, 97, 7, 136, 87, 96, 32, 2, 130, 1,
        145, 144, 96, 0, 82, 96, 32, 96, 0, 32, 144, 96, 0, 144, 91, 130, 130, 144, 84, 144, 97, 1,
        0, 10, 144, 4, 96, 224, 27, 96, 1, 96, 1, 96, 224, 27, 3, 25, 22, 129, 82, 96, 32, 1, 144,
        96, 4, 1, 144, 96, 32, 130, 96, 3, 1, 4, 146, 131, 1, 146, 96, 1, 3, 130, 2, 145, 80, 128,
        132, 17, 97, 7, 74, 87, 144, 80, 91, 80, 80, 80, 80, 80, 129, 82, 80, 80, 129, 82, 96, 32,
        1, 144, 96, 1, 1, 144, 97, 6, 87, 86, 91, 96, 96, 96, 26, 128, 84, 128, 96, 32, 2, 96, 32,
        1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1, 96, 0,
        144, 91, 130, 130, 16, 21, 97, 5, 106, 87, 131, 130, 144, 96, 0, 82, 96, 32, 96, 0, 32, 1,
        128, 84, 97, 7, 227, 144, 97, 16, 214, 86, 91, 128, 96, 31, 1, 96, 32, 128, 145, 4, 2, 96,
        32, 1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1,
        130, 128, 84, 97, 8, 15, 144, 97, 16, 214, 86, 91, 128, 21, 97, 8, 92, 87, 128, 96, 31, 16,
        97, 8, 49, 87, 97, 1, 0, 128, 131, 84, 4, 2, 131, 82, 145, 96, 32, 1, 145, 97, 8, 92, 86,
        91, 130, 1, 145, 144, 96, 0, 82, 96, 32, 96, 0, 32, 144, 91, 129, 84, 129, 82, 144, 96, 1,
        1, 144, 96, 32, 1, 128, 131, 17, 97, 8, 63, 87, 130, 144, 3, 96, 31, 22, 130, 1, 145, 91,
        80, 80, 80, 80, 80, 129, 82, 96, 32, 1, 144, 96, 1, 1, 144, 97, 7, 196, 86, 91, 96, 96, 96,
        29, 128, 84, 128, 96, 32, 2, 96, 32, 1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128, 146, 145,
        144, 129, 129, 82, 96, 32, 1, 96, 0, 144, 91, 130, 130, 16, 21, 97, 5, 106, 87, 96, 0, 132,
        129, 82, 96, 32, 144, 129, 144, 32, 96, 64, 128, 81, 128, 130, 1, 130, 82, 96, 2, 134, 2,
        144, 146, 1, 128, 84, 96, 1, 96, 1, 96, 160, 27, 3, 22, 131, 82, 96, 1, 129, 1, 128, 84,
        131, 81, 129, 135, 2, 129, 1, 135, 1, 144, 148, 82, 128, 132, 82, 147, 148, 145, 147, 133,
        131, 1, 147, 146, 131, 1, 130, 130, 128, 21, 97, 9, 62, 87, 96, 32, 2, 130, 1, 145, 144,
        96, 0, 82, 96, 32, 96, 0, 32, 144, 96, 0, 144, 91, 130, 130, 144, 84, 144, 97, 1, 0, 10,
        144, 4, 96, 224, 27, 96, 1, 96, 1, 96, 224, 27, 3, 25, 22, 129, 82, 96, 32, 1, 144, 96, 4,
        1, 144, 96, 32, 130, 96, 3, 1, 4, 146, 131, 1, 146, 96, 1, 3, 130, 2, 145, 80, 128, 132,
        17, 97, 9, 0, 87, 144, 80, 91, 80, 80, 80, 80, 80, 129, 82, 80, 80, 129, 82, 96, 32, 1,
        144, 96, 1, 1, 144, 97, 8, 148, 86, 91, 96, 96, 96, 28, 128, 84, 128, 96, 32, 2, 96, 32, 1,
        96, 64, 81, 144, 129, 1, 96, 64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1, 96, 0,
        144, 91, 130, 130, 16, 21, 97, 5, 106, 87, 96, 0, 132, 129, 82, 96, 32, 144, 129, 144, 32,
        96, 64, 128, 81, 128, 130, 1, 130, 82, 96, 2, 134, 2, 144, 146, 1, 128, 84, 96, 1, 96, 1,
        96, 160, 27, 3, 22, 131, 82, 96, 1, 129, 1, 128, 84, 131, 81, 129, 135, 2, 129, 1, 135, 1,
        144, 148, 82, 128, 132, 82, 147, 148, 145, 147, 133, 131, 1, 147, 146, 131, 1, 130, 130,
        128, 21, 97, 10, 36, 87, 96, 32, 2, 130, 1, 145, 144, 96, 0, 82, 96, 32, 96, 0, 32, 144,
        96, 0, 144, 91, 130, 130, 144, 84, 144, 97, 1, 0, 10, 144, 4, 96, 224, 27, 96, 1, 96, 1,
        96, 224, 27, 3, 25, 22, 129, 82, 96, 32, 1, 144, 96, 4, 1, 144, 96, 32, 130, 96, 3, 1, 4,
        146, 131, 1, 146, 96, 1, 3, 130, 2, 145, 80, 128, 132, 17, 97, 9, 230, 87, 144, 80, 91, 80,
        80, 80, 80, 80, 129, 82, 80, 80, 129, 82, 96, 32, 1, 144, 96, 1, 1, 144, 97, 9, 122, 86,
        91, 96, 96, 96, 25, 128, 84, 128, 96, 32, 2, 96, 32, 1, 96, 64, 81, 144, 129, 1, 96, 64,
        82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1, 96, 0, 144, 91, 130, 130, 16, 21, 97, 5,
        106, 87, 131, 130, 144, 96, 0, 82, 96, 32, 96, 0, 32, 1, 128, 84, 97, 10, 127, 144, 97, 16,
        214, 86, 91, 128, 96, 31, 1, 96, 32, 128, 145, 4, 2, 96, 32, 1, 96, 64, 81, 144, 129, 1,
        96, 64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1, 130, 128, 84, 97, 10, 171, 144,
        97, 16, 214, 86, 91, 128, 21, 97, 10, 248, 87, 128, 96, 31, 16, 97, 10, 205, 87, 97, 1, 0,
        128, 131, 84, 4, 2, 131, 82, 145, 96, 32, 1, 145, 97, 10, 248, 86, 91, 130, 1, 145, 144,
        96, 0, 82, 96, 32, 96, 0, 32, 144, 91, 129, 84, 129, 82, 144, 96, 1, 1, 144, 96, 32, 1,
        128, 131, 17, 97, 10, 219, 87, 130, 144, 3, 96, 31, 22, 130, 1, 145, 91, 80, 80, 80, 80,
        80, 129, 82, 96, 32, 1, 144, 96, 1, 1, 144, 97, 10, 96, 86, 91, 96, 8, 84, 96, 0, 144, 96,
        255, 22, 21, 97, 11, 36, 87, 80, 96, 8, 84, 96, 255, 22, 144, 86, 91, 96, 64, 81, 99, 6,
        103, 249, 215, 96, 228, 27, 129, 82, 115, 113, 9, 112, 158, 207, 169, 26, 128, 98, 111,
        243, 152, 157, 104, 246, 127, 91, 29, 209, 45, 96, 4, 130, 1, 129, 144, 82, 101, 25, 152,
        90, 91, 25, 89, 96, 210, 27, 96, 36, 131, 1, 82, 96, 0, 145, 99, 102, 127, 157, 112, 144,
        96, 68, 1, 96, 32, 96, 64, 81, 128, 131, 3, 129, 134, 90, 250, 21, 128, 21, 97, 11, 133,
        87, 61, 96, 0, 128, 62, 61, 96, 0, 253, 91, 80, 80, 80, 80, 96, 64, 81, 61, 96, 31, 25, 96,
        31, 130, 1, 22, 130, 1, 128, 96, 64, 82, 80, 129, 1, 144, 97, 11, 169, 145, 144, 97, 17,
        16, 86, 91, 20, 21, 144, 80, 144, 86, 91, 96, 96, 96, 21, 128, 84, 128, 96, 32, 2, 96, 32,
        1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1, 130,
        128, 84, 128, 21, 97, 4, 39, 87, 96, 32, 2, 130, 1, 145, 144, 96, 0, 82, 96, 32, 96, 0, 32,
        144, 129, 84, 96, 1, 96, 1, 96, 160, 27, 3, 22, 129, 82, 96, 1, 144, 145, 1, 144, 96, 32,
        1, 128, 131, 17, 97, 4, 9, 87, 80, 80, 80, 80, 80, 144, 80, 144, 86, 91, 96, 0, 128, 130,
        17, 97, 12, 30, 87, 96, 0, 128, 253, 91, 129, 96, 1, 3, 97, 12, 46, 87, 80, 96, 0, 97, 12,
        152, 86, 91, 130, 96, 0, 3, 97, 12, 62, 87, 80, 96, 1, 97, 12, 152, 86, 91, 96, 1, 96, 0,
        97, 12, 76, 132, 135, 97, 16, 172, 86, 91, 144, 80, 91, 132, 21, 97, 12, 148, 87, 97, 12,
        96, 96, 2, 134, 97, 16, 172, 86, 91, 96, 1, 3, 97, 12, 117, 87, 97, 12, 114, 130, 130, 134,
        97, 12, 159, 86, 91, 145, 80, 91, 97, 12, 128, 129, 130, 134, 97, 12, 159, 86, 91, 144, 80,
        97, 12, 141, 96, 2, 134, 97, 16, 111, 86, 91, 148, 80, 97, 12, 79, 86, 91, 80, 144, 80, 91,
        147, 146, 80, 80, 80, 86, 91, 96, 0, 128, 130, 17, 97, 12, 173, 87, 96, 0, 128, 253, 91,
        96, 0, 128, 97, 12, 186, 132, 134, 97, 16, 172, 86, 91, 144, 80, 91, 133, 21, 97, 12, 148,
        87, 97, 12, 206, 96, 2, 135, 97, 16, 172, 86, 91, 96, 1, 3, 97, 12, 237, 87, 131, 97, 12,
        224, 130, 132, 97, 16, 131, 86, 91, 97, 12, 234, 145, 144, 97, 16, 172, 86, 91, 145, 80,
        91, 131, 97, 12, 249, 130, 96, 2, 97, 17, 41, 86, 91, 97, 13, 3, 145, 144, 97, 16, 172, 86,
        91, 144, 80, 97, 13, 16, 96, 2, 135, 97, 16, 111, 86, 91, 149, 80, 97, 12, 189, 86, 91,
        129, 81, 96, 0, 144, 130, 144, 96, 32, 133, 1, 131, 91, 130, 129, 16, 21, 97, 13, 66, 87,
        129, 81, 132, 82, 96, 32, 147, 132, 1, 147, 144, 145, 1, 144, 96, 1, 1, 97, 13, 36, 86, 91,
        80, 145, 149, 148, 80, 80, 80, 80, 80, 86, 91, 96, 32, 128, 130, 82, 130, 81, 130, 130, 1,
        129, 144, 82, 96, 0, 145, 132, 1, 144, 96, 64, 132, 1, 144, 131, 91, 129, 129, 16, 21, 97,
        13, 142, 87, 131, 81, 96, 1, 96, 1, 96, 160, 27, 3, 22, 131, 82, 96, 32, 147, 132, 1, 147,
        144, 146, 1, 145, 96, 1, 1, 97, 13, 103, 86, 91, 80, 144, 149, 148, 80, 80, 80, 80, 80, 86,
        91, 96, 0, 129, 81, 128, 132, 82, 96, 0, 91, 129, 129, 16, 21, 97, 13, 191, 87, 96, 32,
        129, 133, 1, 129, 1, 81, 134, 131, 1, 130, 1, 82, 1, 97, 13, 163, 86, 91, 80, 96, 0, 96,
        32, 130, 134, 1, 1, 82, 96, 32, 96, 31, 25, 96, 31, 131, 1, 22, 133, 1, 1, 145, 80, 80,
        146, 145, 80, 80, 86, 91, 96, 0, 96, 32, 130, 1, 96, 32, 131, 82, 128, 132, 81, 128, 131,
        82, 96, 64, 133, 1, 145, 80, 96, 64, 129, 96, 5, 27, 134, 1, 1, 146, 80, 96, 32, 134, 1,
        96, 0, 91, 130, 129, 16, 21, 97, 14, 159, 87, 96, 63, 25, 135, 134, 3, 1, 132, 82, 129, 81,
        128, 81, 96, 1, 96, 1, 96, 160, 27, 3, 22, 134, 82, 96, 32, 144, 129, 1, 81, 96, 64, 130,
        136, 1, 129, 144, 82, 129, 81, 144, 136, 1, 129, 144, 82, 145, 1, 144, 96, 96, 96, 5, 130,
        144, 27, 136, 1, 129, 1, 145, 144, 136, 1, 144, 96, 0, 91, 129, 129, 16, 21, 97, 14, 133,
        87, 96, 95, 25, 138, 133, 3, 1, 131, 82, 97, 14, 111, 132, 134, 81, 97, 13, 153, 86, 91,
        96, 32, 149, 134, 1, 149, 144, 148, 80, 146, 144, 146, 1, 145, 96, 1, 1, 97, 14, 83, 86,
        91, 80, 145, 151, 80, 80, 80, 96, 32, 148, 133, 1, 148, 146, 144, 146, 1, 145, 80, 96, 1,
        1, 97, 14, 7, 86, 91, 80, 146, 150, 149, 80, 80, 80, 80, 80, 80, 86, 91, 96, 0, 129, 81,
        128, 132, 82, 96, 32, 132, 1, 147, 80, 96, 32, 131, 1, 96, 0, 91, 130, 129, 16, 21, 97, 14,
        231, 87, 129, 81, 96, 1, 96, 1, 96, 224, 27, 3, 25, 22, 134, 82, 96, 32, 149, 134, 1, 149,
        144, 145, 1, 144, 96, 1, 1, 97, 14, 191, 86, 91, 80, 147, 148, 147, 80, 80, 80, 80, 86, 91,
        96, 0, 96, 32, 130, 1, 96, 32, 131, 82, 128, 132, 81, 128, 131, 82, 96, 64, 133, 1, 145,
        80, 96, 64, 129, 96, 5, 27, 134, 1, 1, 146, 80, 96, 32, 134, 1, 96, 0, 91, 130, 129, 16,
        21, 97, 14, 159, 87, 96, 63, 25, 135, 134, 3, 1, 132, 82, 129, 81, 128, 81, 96, 64, 135,
        82, 97, 15, 63, 96, 64, 136, 1, 130, 97, 13, 153, 86, 91, 144, 80, 96, 32, 130, 1, 81, 145,
        80, 134, 129, 3, 96, 32, 136, 1, 82, 97, 15, 90, 129, 131, 97, 14, 171, 86, 91, 150, 80,
        80, 80, 96, 32, 147, 132, 1, 147, 145, 144, 145, 1, 144, 96, 1, 1, 97, 15, 25, 86, 91, 96,
        0, 96, 32, 130, 1, 96, 32, 131, 82, 128, 132, 81, 128, 131, 82, 96, 64, 133, 1, 145, 80,
        96, 64, 129, 96, 5, 27, 134, 1, 1, 146, 80, 96, 32, 134, 1, 96, 0, 91, 130, 129, 16, 21,
        97, 14, 159, 87, 96, 63, 25, 135, 134, 3, 1, 132, 82, 97, 15, 181, 133, 131, 81, 97, 13,
        153, 86, 91, 148, 80, 96, 32, 147, 132, 1, 147, 145, 144, 145, 1, 144, 96, 1, 1, 97, 15,
        153, 86, 91, 96, 0, 96, 32, 130, 1, 96, 32, 131, 82, 128, 132, 81, 128, 131, 82, 96, 64,
        133, 1, 145, 80, 96, 64, 129, 96, 5, 27, 134, 1, 1, 146, 80, 96, 32, 134, 1, 96, 0, 91,
        130, 129, 16, 21, 97, 14, 159, 87, 134, 133, 3, 96, 63, 25, 1, 132, 82, 129, 81, 128, 81,
        96, 1, 96, 1, 96, 160, 27, 3, 22, 134, 82, 96, 32, 144, 129, 1, 81, 96, 64, 145, 135, 1,
        130, 144, 82, 144, 97, 16, 45, 144, 135, 1, 130, 97, 14, 171, 86, 91, 149, 80, 80, 96, 32,
        147, 132, 1, 147, 145, 144, 145, 1, 144, 96, 1, 1, 97, 15, 242, 86, 91, 99, 78, 72, 123,
        113, 96, 224, 27, 96, 0, 82, 96, 18, 96, 4, 82, 96, 36, 96, 0, 253, 91, 99, 78, 72, 123,
        113, 96, 224, 27, 96, 0, 82, 96, 17, 96, 4, 82, 96, 36, 96, 0, 253, 91, 96, 0, 130, 97, 16,
        126, 87, 97, 16, 126, 97, 16, 67, 86, 91, 80, 4, 144, 86, 91, 128, 130, 1, 128, 130, 17,
        21, 97, 3, 201, 87, 97, 3, 201, 97, 16, 89, 86, 91, 99, 78, 72, 123, 113, 96, 224, 27, 96,
        0, 82, 96, 65, 96, 4, 82, 96, 36, 96, 0, 253, 91, 96, 0, 130, 97, 16, 187, 87, 97, 16, 187,
        97, 16, 67, 86, 91, 80, 6, 144, 86, 91, 99, 78, 72, 123, 113, 96, 224, 27, 96, 0, 82, 96,
        50, 96, 4, 82, 96, 36, 96, 0, 253, 91, 96, 1, 129, 129, 28, 144, 130, 22, 128, 97, 16, 234,
        87, 96, 127, 130, 22, 145, 80, 91, 96, 32, 130, 16, 129, 3, 97, 17, 10, 87, 99, 78, 72,
        123, 113, 96, 224, 27, 96, 0, 82, 96, 34, 96, 4, 82, 96, 36, 96, 0, 253, 91, 80, 145, 144,
        80, 86, 91, 96, 0, 96, 32, 130, 132, 3, 18, 21, 97, 17, 34, 87, 96, 0, 128, 253, 91, 80,
        81, 145, 144, 80, 86, 91, 128, 130, 2, 129, 21, 130, 130, 4, 132, 20, 23, 97, 3, 201, 87,
        97, 3, 201, 97, 16, 89, 86, 254, 162, 100, 105, 112, 102, 115, 88, 34, 18, 32, 179, 36,
        177, 91, 42, 215, 254, 144, 247, 19, 162, 215, 65, 165, 249, 92, 118, 83, 43, 98, 1, 166,
        233, 9, 19, 68, 82, 89, 232, 221, 61, 87, 100, 115, 111, 108, 99, 67, 0, 8, 28, 0, 51,
    ]
    .into();

    let mut runner = Runner::new(caller, origin, address, value, data, None);

    let _ = runner.interpret(bytecode.clone(), Some(0), false);
    // println!("{:?}", x);
    // println!("{:?}", runner.returndata.heap);

    let encoded = encode_to_base64(runner.returndata.heap);
    println!("{}", encoded);
}

/*
0x0000000000000006a2b02bada55aa50a2f7d27610aa8d25883f538d0673eb5e6000000000000003222a529616a0ea56c90e41a4ecc71efc19eb34777f9dd354f00000000000000547b83627eef4b7e813b5c58df65571a2b046b1d5c08b507620000000000000000000000000000000000000000000000000000000000000000
0x0000000000000006a2b02bada55aa50a2f7d27610aa8d25883f538d0673eb5e6000000000000003222a529616a0ea56c90e41a4ecc71efc19eb34777f9dd354f00000000000000547b83627eef4b7e813b5c58df65571a2b046b1d5c08b5076200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
 */
